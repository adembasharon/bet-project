var gameflexExpressLibraryLoader=function(r){var e={};function n(t){if(e[t])return e[t].exports;var o=e[t]={i:t,l:!1,exports:{}};return r[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=r,n.c=e,n.d=function(r,e,t){n.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:t})},n.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,e){if(1&e&&(r=n(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var o in r)n.d(t,o,function(e){return r[e]}.bind(null,o));return t},n.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(e,"a",e),e},n.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},n.p="",n(n.s=0)}([function(r,e,n){var t=n(1);r.exports=new t},function(r,e,n){var t=n(2),o=n(3),i=n(4),a=t.get(),l=o.librariesUrl.fromScript(a);function s(r,e){var n=document.createElement("script");n.src=r,n.onload=e,document.head.appendChild(n)}r.exports=function(){var r,e,n,t,a,u,p,c,f,d,g,m,x,U,b,y,O,v,w="v1",L=!0,E=!1;function h(E){L=L||E.debug,function(s){w=s.version||w,r=o.librariesUrl.parse(l,s),n=o.baseUrl.parse(s.domainLaunchUrl,r),e=o.extractHostname(n),t=o.domainLaunchUrl.parse(s.domainLaunchUrl,w),a=o.versionUrl.parse(n,w),u=o.scriptsUrl.parse(n,w),p=o.mediaUrl.parse(n,w),c=o.controllersUrl.parse(n,w),f=o.gameflexOriginUrl.parse(n),d=o.operatorOriginUrl.parse(),g=o.expressLibraryUrl.parse(r,w),x=u+"config/environmentConfig.js",m=u+"gameflex-express-library/gameflex-express-modules.js",U=i.parsePlatformKey(s.platformKey),b=i.parseOperatorCode(U,s.operatorCode),y=i.parseBrandID(U,b,s.brandID),v=s.gameLaunchType||1,console.log("gelParameters",{baseHostname:e,baseUrl:n,domainLaunchUrl:t,librariesUrl:r,versionUrl:a,scriptsUrl:u,mediaUrl:p,controllersUrl:c,gameflexOriginUrl:f,operatorOriginUrl:d,expressLibraryUrl:g,configUrl:x,expressLibraryModulesUrl:m,platformKey:U,operatorCode:b,brandID:y,gameLaunchType:v})}(E),s(g,(function(){s(x,(function(){s(m,(function(){!function(r){O=o.apiUrl.parse(gameflexExpressBootstrap.environmentConfiguration.internalApi.baseUrl,f,e),gameflexExpressBootstrap.environmentConfiguration.internalApi.baseUrl=O,L&&console.log({apiUrl:O});var n=window.gameflexExpressBootstrap.initialise({platformKey:U,operatorCode:b,brandID:y,gameflexOriginUrl:f,operatorOriginUrl:d,domainLaunchUrl:t,controllersUrl:c,rootUrl:a,apiUrl:O,scriptsUrl:u,mediaUrl:p,gameLaunchType:v});-1!==U.indexOf("008")&&(window.gameflexExpressLibrary=n);r.success&&"function"==typeof r.success&&r.success(n);window.gameflexExpressLibraryLoader=void 0;try{delete window.gameflexExpressLibraryLoader}catch(r){}}(E)}))}))}))}function S(r){E||(E=!0,h(r))}return{initialise:S,load:S}}},function(r,e){function n(r){return!(!r||!r.attributes.src||-1===r.attributes.src.value.indexOf("gameflexExpressLibraryLoader"))}r.exports={get:function(){var r=document.currentScript;return n(r)?r:(r=function(){for(var r=document.getElementsByTagName("script"),e=0;e<r.length;e++){var t=r[e];if(n(t))return t}return null}(),null)}}},function(r,e){function n(r,e){return r?(e?"/"===r.substr(-1)&&(r=r.substr(0,r.length-1)):"/"!==r.substr(-1)&&(r+="/"),r=t(r)):null}function t(r){return r?r=r.replace(new RegExp("%p","g"),location.protocol):null}r.exports={extractHostname:function(r){return(r.indexOf("://")>-1?r.split("/")[2]:r.split("/")[0]).split(":")[0].split("?")[0]},domainLaunchUrl:{parse:function(r,e){return r?n(r+e+"/controllers/games"):null}},librariesUrl:{fromScript:function(r){if(r){var e=r.attributes.src.value.split("?")[0];return 0===e.indexOf("//")&&(e=window.location.protocol+e),e=n(e=e.replace(new RegExp("express/gameflexExpressLibraryLoader.js","g"),""))}return null},parse:function(r,e){if(!r){if(e.libraryUrl)return n(e.libraryUrl);throw"Invalid Gameflex Express configuration.  libraryUrl is required"}return r}},baseUrl:{parse:function(r,e){return r||e}},controllersUrl:{parse:function(r,e){return n(r+e+"/controllers")}},versionUrl:{parse:function(r,e){return n(r+e)}},scriptsUrl:{parse:function(r,e){return r+"media/5-0-8/@@VERSION/scripts/".replace(new RegExp("@@VERSION","g"),e)}},mediaUrl:{parse:function(r,e){return r+"media/5-0-8/@@VERSION/".replace(new RegExp("@@VERSION","g"),e)}},gameflexOriginUrl:{parse:function(r){var e=r.indexOf("://")+3;return r.substring(0,e)+r.substring(e).split("/")[0]}},operatorOriginUrl:{parse:function(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}},expressLibraryUrl:{parse:function(r,e){var n="media/5-0-8/@@VERSION/scripts/express/gameflexExpressLibrary".replace(new RegExp("@@VERSION","g"),e);return r+(n+=".js")}},apiUrl:{parse:function(r,e,n){return"/"===r.substr(0,1)?e+r:function(r,e){if(e=e||location.hostname,r)return r=r.replace(new RegExp("%h","g"),e);return null}(t(r),n)}}}},function(r,e){r.exports={parsePlatformKey:function(r){return r.toLocaleUpperCase()},parseOperatorCode:function(r,e){return e||(-1!==r.indexOf("006")&&(e="OLY"),-1!==r.indexOf("008")&&(e="PAN"),-1!==r.indexOf("010")&&(e="DED"),-1!==r.indexOf("011")&&(e="BTW")),e},parseBrandID:function(r,e,n){return n}}}]);
//# sourceMappingURL=gameflexExpressLibraryLoader.js.map